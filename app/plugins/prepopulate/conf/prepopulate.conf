#
# prepopulate field configuration
#

# set to 1 to enable the plugin
enabled = 1

prepopulate_fields_on_save = 1
prepopulate_fields_on_edit = 1

prepopulate_rules = {

# ------------------ PLACES

#    place_identifying_title = {
#        table = ca_places,
##        skipIfExpression = ^ca_places.vhh_TitlePlace.TP_Type !~ /offical name/,
#        mode = addIfEmpty,
#        target = ^ca_places.preferred_labels.name,
##        template = ^ca_places.vhh_TitlePlace.TP_Name,
#        template = <unit relativeTo="ca_places.vhh_TitlePlace" start="0" length="1">^ca_places.vhh_TitlePlace.TP_Name</unit>,
#        useFor = [edit, save],
#    }

# ------------------ AGENTS

#    agent_person_prefix = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.prefix,
#        template = ^ca_entities.vhh_PersonName.PN_Prefix,
#        useFor = [edit, save],
#    }
#
#    agent_person_forename = {
#        #skipIfExpression = ^ca_entities.vhh_PersonName.PN_DisplayName =~ /skip/,
#        skipIfExpression = ^ca_entities.idno =~ /VHH-A-0031247/,
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.forename,
#        template = ^ca_entities.vhh_PersonName.PN_Forename,
#        useFor = [edit, save],
#    }
#
#    agent_person_middlename = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.middlename,
#        template = ^ca_entities.vhh_PersonName.PN_MiddleName,
#        useFor = [edit, save],
#    }
#
#    agent_person_familyname = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.surname,
#        template = ^ca_entities.vhh_PersonName.PN_FamilyName,
#        useFor = [edit, save],
#    }
#
#    agent_person_suffix = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.suffix,
#        template = ^ca_entities.vhh_PersonName.PN_Suffix,
#        useFor = [edit, save],
#    }
#
#    agent_person_other_forenames = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.other_forenames,
#        template = ^ca_entities.vhh_PersonName.PN_OtherForenames,
#        useFor = [edit, save],
#    }
#
#    agent_person_displayname = {
#        table = ca_entities,
#        restrictToTypes = [person],
#        mode = overwrite,
#        target = ^ca_entities.preferred_labels.displayname,
#        template = ^ca_entities.vhh_PersonName.PN_DisplayName,
#        useFor = [edit, save],
#    }

    # -------------------
    #event_production = {
    #    table = ca_occurrences,
    #    restrictToTypes = [cws_event_production],
    #    mode = overwrite,
    #    target = ^ca_occurrences.preferred_labels.name,
    #    template = Production: ^ca_occurrences.cws_ProductionEventType (^ca_occurrences.cws_Date / ^ca_occurrences.cws_Location),
    #    useFor = [edit, save],
    #},
#
#    # -------------------
#    event_decision = {
#        table = ca_occurrences,
#        restrictToTypes = [cws_event_decision],
#        mode = overwrite,
#        target = ^ca_occurrences.preferred_labels.name,
#        template = Decision: ^ca_occurrences.cws_DecisionType (^ca_occurrences.cws_Date / ^ca_occurrences.cws_RegionalScope),
#        useFor = [edit, save],
#    },
#
#    # -------------------
#    event_ipr = {
#        table = ca_occurrences,
#        restrictToTypes = [cws_event_ipr],
#        mode = overwrite,
#        target = ^ca_occurrences.preferred_labels.name,
#        template = IPR: (^ca_occurrences.cws_Date / ^ca_occurrences.cws_RegionalScope),
#        useFor = [edit, save],
#    },

    # -------------------
}
